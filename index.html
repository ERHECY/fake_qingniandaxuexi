<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fake_Qingniandaxuexi</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@1.0.2/dist/css/mdui.min.css" />
    <link rel="stylesheet" href="./css/style.css">
    <script src="./js/html2canvas.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mdui@1.0.2/dist/js/mdui.min.js"></script>
</head>

<body>
    <div class="box">
        <!-- <div class="head">
            <div style="    z-index: -1;">
                <img src="./images/body_bg_nether.jpg" alt="">
            </div>
            <div class="right">
                <p>Erhecy</p>
                <img src="./images/a.jpg" alt="">
            </div>
        </div> -->
        <div class="msg">
            <div class="header">
                <img src="./images/a.jpg" alt="" id="wecahtimg">
            </div>
            <div class="content">
                <div class="name">
                    <p id="wechatname">Erhecy</p>
                </div>
                <p id="wechatmsg">xxx班 xxx</p>
                <div class="background">
                    <img src="./images/link.png" alt="">
                    <p id="wechatlink">“青年大学习”第十一季第十三期</p>
                </div>
                <img src="./images/footer.png" alt="">
            </div>
        </div>
    </div>


    <div class="control">
        <h1 class="title">
            Fake_Qingniandaxuexi
        </h1>
        <input type="text" class="mdui-textfield-input mdui-m-b-2" placeholder="微信名称" id="nowwechatname" value="Erhecy">
        <input type="text" class="mdui-textfield-input mdui-m-b-2" value="“青年大学习”第十二季第八期" placeholder="“青年大学习”第十二季第八期" id="nowwechatlink">
        <input type="text" class="mdui-textfield-input mdui-m-b-2" value="xxx班 xxx" placeholder="xxx班 xxx" id="nowwechatmsg">
        <input type="file" id="uploadImg" class="mdui-textfield-input mdui-m-b-2" onchange="xmTanUploadImg(this)">
        <button class="mdui-btn mdui-btn-raised mdui-ripple mdui-m-t-3 mdui-m-b-3" onclick="generate()">生成</button>
        <img id="img" />
    </div>


    <script>
        var element = document.querySelector('.box');
        var image = document.querySelector('#img');

        function generate() {
            document.getElementById('wechatname').innerText = document.getElementById("nowwechatname").value;
            document.getElementById('wechatlink').innerHTML = document.getElementById('nowwechatlink').value;
            document.getElementById('wechatmsg').innerHTML = document.getElementById('nowwechatmsg').value;
            html2image(element, image);
        }

        function html2image(source, image) {
            html2canvas(source).then(function(canvas) {
                var imageData = canvas.toDataURL(1);
                image.src = imageData;
            });
        }

        function xmTanUploadImg(obj) {
            var file = obj.files[0];
            var reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = function(e) {
                var img = document.getElementById("wecahtimg");
                img.src = e.target.result;

            };
        }
    </script>
</body>

</html>